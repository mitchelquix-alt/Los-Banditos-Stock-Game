<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Los Banditos Stock Race 2026</title>
<link href="https://fonts.googleapis.com/css2?family=Abril+Fatface&family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@500;700&display=swap" rel="stylesheet">
<style>
:root{--bg:#f5f3f0;--sf:#ffffff;--sf2:#f0ede8;--bd:#e0dbd4;--tx:#1a1a1a;--mt:#6b6560;--gold:#c88a10;--grn:#1a8a4a;--red:#d43030}
*{margin:0;padding:0;box-sizing:border-box}
body{background:var(--bg);color:var(--tx);font-family:'Inter',sans-serif}
body::before{content:'';position:fixed;inset:0;background:radial-gradient(ellipse at 20% 0%,rgba(200,138,16,.04)0%,transparent 60%),radial-gradient(ellipse at 80% 100%,rgba(108,92,231,.03)0%,transparent 60%);pointer-events:none;z-index:0}
.c{max-width:1200px;margin:0 auto;padding:0 20px;position:relative;z-index:1}
header{padding:40px 0 28px;text-align:center;position:relative}
header::after{content:'';position:absolute;bottom:0;left:50%;transform:translateX(-50%);width:80px;height:2px;background:linear-gradient(90deg,transparent,var(--gold),transparent)}
.badge{display:inline-flex;align-items:center;gap:6px;background:linear-gradient(135deg,rgba(200,138,16,.12),rgba(200,138,16,.04));border:1px solid rgba(200,138,16,.25);padding:5px 14px;border-radius:99px;font-size:12px;color:var(--gold);font-weight:700;letter-spacing:2px;text-transform:uppercase;margin-bottom:14px}
h1{font-family:'Abril Fatface',serif;font-size:clamp(32px,7vw,72px);line-height:1.05;color:var(--gold);text-shadow:0 0 60px rgba(200,138,16,.1);margin-bottom:6px}
.sub{color:var(--mt);font-size:15px}
.upd{display:inline-block;margin-top:10px;font-family:'JetBrains Mono',monospace;font-size:11px;color:var(--mt);background:var(--sf);border:1px solid var(--bd);padding:3px 10px;border-radius:6px}
.tabs{display:flex;gap:3px;justify-content:center;margin:28px 0 20px;background:var(--sf);border:1px solid var(--bd);border-radius:10px;padding:3px;width:fit-content;margin-left:auto;margin-right:auto;flex-wrap:wrap}
.tab{padding:9px 20px;border-radius:7px;font-size:13px;font-weight:600;cursor:pointer;color:var(--mt);transition:all .2s;border:none;background:none;font-family:inherit}
.tab:hover{color:var(--tx)}.tab.active{background:var(--gold);color:#fff;box-shadow:0 2px 10px rgba(200,138,16,.25)}
.sec{display:none;animation:fi .35s ease}.sec.active{display:block}
@keyframes fi{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}
.box{background:var(--sf);border:1px solid var(--bd);border-radius:14px;padding:28px;margin-bottom:28px;position:relative;overflow:hidden;box-shadow:0 2px 8px rgba(0,0,0,.04)}
.box::before{content:'';position:absolute;top:0;left:0;right:0;height:2px;background:linear-gradient(90deg,#e05050,#e08830,#30b868,#6c5ce7,#e06090,#00aca0)}
.rh{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;flex-wrap:wrap;gap:8px}
.rt{font-family:'Abril Fatface',serif;font-size:22px;color:var(--tx)}
.rd{font-family:'JetBrains Mono',monospace;font-size:14px;color:var(--gold);font-weight:700}
.cw{position:relative;height:400px;margin-bottom:16px}.cw canvas{width:100%!important;height:100%!important}
.rc{display:flex;gap:10px;justify-content:center;flex-wrap:wrap;margin-top:12px}
.btn{padding:9px 22px;border-radius:8px;font-size:13px;font-weight:600;cursor:pointer;border:1px solid var(--bd);background:var(--sf2);color:var(--tx);font-family:inherit;transition:all .2s}
.btn:hover{border-color:var(--gold);background:rgba(200,138,16,.08)}
.btn.p{background:var(--gold);color:#fff;border-color:var(--gold)}.btn.p:hover{background:#d89818}
.lb{display:grid;gap:12px;margin-bottom:28px}
.lc{display:grid;grid-template-columns:52px 56px 1fr auto;align-items:center;gap:14px;padding:18px 20px;background:var(--sf);border:1px solid var(--bd);border-radius:12px;transition:all .25s;box-shadow:0 1px 4px rgba(0,0,0,.03)}
.lc:hover{border-color:rgba(200,138,16,.35);transform:translateY(-1px);box-shadow:0 6px 20px rgba(0,0,0,.08)}
.lc.f1{border-color:rgba(200,138,16,.4);background:linear-gradient(135deg,var(--sf),rgba(200,138,16,.06))}
.rk{font-family:'Abril Fatface',serif;font-size:28px;text-align:center;color:var(--mt)}.rk.g{color:var(--gold)}.rk.s{color:#a0a0a0}.rk.b{color:#b07030}
.avatar{width:48px;height:48px;border-radius:50%;border:2px solid var(--bd);overflow:hidden;flex-shrink:0}
.avatar svg{width:100%;height:100%;display:block}
.li h3{font-size:15px;font-weight:700;margin-bottom:3px;color:var(--tx)}
.lm{display:flex;gap:10px;align-items:center;flex-wrap:wrap}.lm span{font-size:12px;color:var(--mt)}
.stag{font-family:'JetBrains Mono',monospace;background:var(--sf2);padding:2px 7px;border-radius:4px;font-size:11px}
.gdir{font-size:11px;color:var(--mt);margin-top:2px}
.lv{text-align:right}.lp{font-family:'JetBrains Mono',monospace;font-size:20px;font-weight:700}.le{font-size:12px;color:var(--mt);font-family:'JetBrains Mono',monospace}
.pos{color:var(--grn)}.neg{color:var(--red)}
.gs{display:grid;grid-template-columns:repeat(auto-fit,minmax(340px,1fr));gap:14px;margin-bottom:28px}
.gc{background:var(--sf);border:1px solid var(--bd);border-radius:12px;padding:22px;position:relative;overflow:hidden;box-shadow:0 1px 4px rgba(0,0,0,.03)}
.gc::after{content:'üéÅ';position:absolute;top:-8px;right:-4px;font-size:48px;opacity:.06}
.gft{display:flex;align-items:center;gap:12px;margin-bottom:16px}
.gp{text-align:center;min-width:70px}.gp .nm{font-weight:700;font-size:14px;color:var(--tx)}.gp .rl{font-size:10px;color:var(--mt);text-transform:uppercase;letter-spacing:1px}
.ga{font-size:18px;color:var(--gold)}
.gsk{display:flex;align-items:center;gap:12px;padding:12px;background:var(--sf2);border-radius:8px;margin-bottom:14px}
.glogo{width:32px;height:32px;border-radius:6px;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:12px;color:#fff;flex-shrink:0}
.gtk{font-family:'JetBrains Mono',monospace;font-weight:700;font-size:15px;color:var(--gold)}.gn{font-size:12px;color:var(--mt)}
.gpe{display:flex;justify-content:space-between;align-items:baseline}
.gpr{font-size:12px;color:var(--mt);font-family:'JetBrains Mono',monospace}
.gpv{font-family:'JetBrains Mono',monospace;font-weight:700;font-size:20px}
.sg{display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:10px;margin-bottom:24px}
.sc{background:var(--sf);border:1px solid var(--bd);border-radius:10px;padding:16px;text-align:center;box-shadow:0 1px 4px rgba(0,0,0,.03)}
.sl{font-size:11px;color:var(--mt);text-transform:uppercase;letter-spacing:1px;margin-bottom:6px}
.sv{font-family:'JetBrains Mono',monospace;font-size:22px;font-weight:700}
.loading{text-align:center;padding:60px;color:var(--mt);font-size:16px}
.banner-img{width:100%;max-width:900px;height:auto;border-radius:12px;margin:0 auto 24px;display:block;box-shadow:0 4px 12px rgba(0,0,0,0.08);border:1px solid var(--bd)}
.article-list{display:grid;gap:16px;margin-bottom:28px}
.article-card{background:var(--sf);border:1px solid var(--bd);border-radius:12px;padding:24px;cursor:pointer;transition:all .25s;box-shadow:0 1px 4px rgba(0,0,0,.03)}
.article-card:hover{border-color:rgba(200,138,16,.35);transform:translateY(-2px);box-shadow:0 6px 20px rgba(0,0,0,.08)}
.article-card h3{font-size:18px;font-weight:700;margin-bottom:6px;color:var(--tx)}
.article-card .article-meta{font-size:12px;color:var(--mt);margin-bottom:10px;font-family:'JetBrains Mono',monospace}
.article-card .article-preview{font-size:14px;color:var(--mt);line-height:1.6}
.article-card .article-tag{display:inline-block;background:var(--sf2);border:1px solid var(--bd);padding:2px 8px;border-radius:4px;font-size:11px;font-weight:600;color:var(--gold);margin-right:6px}
.article-full{background:var(--sf);border:1px solid var(--bd);border-radius:14px;padding:40px;margin-bottom:28px;box-shadow:0 2px 8px rgba(0,0,0,.04);line-height:1.8;font-size:15px}
.article-full h2{font-family:'Abril Fatface',serif;font-size:28px;color:var(--gold);margin:32px 0 16px}
.article-full h3{font-size:18px;font-weight:700;margin:24px 0 12px;color:var(--tx)}
.article-full p{margin-bottom:16px;color:var(--tx)}
.article-full .article-header{text-align:center;margin-bottom:32px;padding-bottom:24px;border-bottom:1px solid var(--bd)}
.article-full .article-header h1{font-family:'Abril Fatface',serif;font-size:clamp(24px,5vw,42px);color:var(--gold);margin-bottom:8px}
.article-full .article-header .meta{font-size:13px;color:var(--mt);font-family:'JetBrains Mono',monospace}
.article-full blockquote{border-left:3px solid var(--gold);padding:12px 20px;margin:20px 0;background:var(--sf2);border-radius:0 8px 8px 0;font-style:italic;color:var(--mt)}
.article-full .highlight-box{background:var(--sf2);border:1px solid var(--bd);border-radius:10px;padding:20px;margin:20px 0}
.article-full strong{color:var(--tx)}
.article-full .back-btn{display:inline-flex;align-items:center;gap:6px;padding:8px 16px;border-radius:8px;font-size:13px;font-weight:600;cursor:pointer;border:1px solid var(--bd);background:var(--sf2);color:var(--tx);font-family:inherit;transition:all .2s;margin-bottom:20px}
.article-full .back-btn:hover{border-color:var(--gold);background:rgba(200,138,16,.08)}
.article-full .toc{background:var(--sf2);border:1px solid var(--bd);border-radius:10px;padding:20px;margin:20px 0}
.article-full .toc h3{margin-top:0}
.article-full .toc ol{padding-left:20px;color:var(--mt)}
.article-full .toc li{margin-bottom:4px;font-size:14px}
footer{text-align:center;padding:28px 0 40px;color:var(--mt);font-size:12px}
@keyframes cf{0%{transform:translateY(0) rotate(0);opacity:1}100%{transform:translateY(100vh) rotate(720deg);opacity:0}}
@media(max-width:768px){.box{padding:16px}.gs{grid-template-columns:1fr}.sg{grid-template-columns:1fr 1fr}.cw{height:300px}.tab{padding:7px 14px;font-size:12px}.lc{grid-template-columns:36px 42px 1fr auto;gap:8px;padding:14px}.avatar{width:38px;height:38px}}
.daily-quote{text-align:center;padding:16px 24px;margin-bottom:16px;background:linear-gradient(135deg,#faf8f5,#f5f0e8);border:1px solid var(--bd);border-radius:12px;font-family:'Inter',sans-serif}
.daily-quote .dq-text{font-size:15px;font-style:italic;color:var(--tx);line-height:1.5;margin-bottom:6px}
.daily-quote .dq-author{font-size:12px;color:var(--mt);font-weight:600;letter-spacing:0.3px}
</style>
</head>
<body>
<div class="c">
  <header>
    <img src="Gemini_Generated_Image_6nmwuf6nmwuf6nmw.png" alt="Los Banditos Stock Challenge" class="banner-img">
    <div class="badge">ü§† Los Banditos</div>
    <h1>Stock Race 2026</h1>
    <p class="sub">6 amigos ¬∑ 6 stocks ¬∑ ‚Ç¨100 each ¬∑ May the best bandito win</p>
    <div class="upd" id="updDate">üìÖ Loading prices...</div>
  </header>
  <div id="dailyQuote" class="daily-quote"></div>
  <div class="tabs">
    <button class="tab active" onclick="switchTab('race')">üèá Race</button>
    <button class="tab" onclick="switchTab('lb')">üèÜ Standings</button>
    <button class="tab" onclick="switchTab('gifts')">üéÅ Gifts</button>
    <button class="tab" onclick="switchTab('stats')">üìä Stats</button>
    <button class="tab" onclick="switchTab('articles')">üìù Articles</button>
  </div>
  <div id="race" class="sec active">
    <div class="box">
      <div class="rh"><div class="rt">üèá The Great Bandito Race</div><div class="rd" id="rD">Jan 2, 2026</div></div>
      <div class="cw"><canvas id="rC"></canvas></div>
      <div style="text-align:center;font-size:11px;color:var(--mt);margin-bottom:12px">TICKER ‚Üí Receiver's name &nbsp;|&nbsp; Hover for full details incl. who gifted the stock</div>
      <div class="rc">
        <button class="btn p" id="sB" onclick="startRace()">‚ñ∂ Start Race</button>
        <button class="btn" onclick="pauseRace()">‚è∏ Pause</button>
        <button class="btn" onclick="resetRace()">‚Ü∫ Reset</button>
      </div>
    </div>
  </div>
  <div id="lb" class="sec"><div id="lbC" class="lb"></div></div>
  <div id="gifts" class="sec"><div id="gfC" class="gs"></div></div>
  <div id="stats" class="sec"><div id="stG" class="sg"></div><div class="box"><div class="rt" style="margin-bottom:16px">üìà YTD Performance</div><div class="cw"><canvas id="bC"></canvas></div></div></div>
  <div id="articles" class="sec">
    <div id="articleList" class="article-list">
      <a href="Shift4_company_analyses_Feb2026.pdf" target="_blank" style="text-decoration:none;color:inherit">
        <div class="article-card">
          <div><span class="article-tag">FOUR</span><span class="article-tag">Investment Report</span><span class="article-tag">üìÑ PDF</span></div>
          <h3 style="margin-top:10px">Investment Report: Shift4 (FOUR)</h3>
          <div class="article-meta">By Mitchel Quix ¬∑ February 12, 2026 ¬∑ Long / High Conviction</div>
          <div class="article-preview">This article is written as an introduction to the company Shift4 for novice investors. When approaching an investment, I believe it's crucial to look beyond financial metrics ‚Äî I want to understand the company culture, the management team, and then examine the financial data as proof.</div>
        </div>
      </a>
    </div>
  </div>
</div>
<footer>Made with ü§† for Los Banditos ¬∑ Prices updated daily via Alpha Vantage ¬∑ Not financial advice</footer>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.umd.min.js"></script>
<script>
/* ===== CARTOON AVATARS (personalized) ===== */
const avatars = {};

// REMCO: Short brown hair styled up, clean-shaven, strong jaw, brown eyes, big white smile, grey hoodie
avatars.Remco = `<svg viewBox="0 0 100 100"><circle cx="50" cy="50" r="50" fill="#e8e4e0"/><circle cx="50" cy="54" r="34" fill="#f0c0a0"/><ellipse cx="50" cy="30" rx="28" ry="18" fill="#6b4a2e"/><path d="M24 34Q35 20 50 18Q65 20 76 34Q72 24 50 18Q28 24 24 34Z" fill="#5a3d22"/><path d="M30 34Q40 26 50 24Q60 26 70 34Q65 28 50 25Q35 28 30 34Z" fill="#7a5838"/><path d="M42 30Q50 22 58 30" fill="#7a5838"/><ellipse cx="38" cy="50" rx="4.5" ry="5" fill="#fff"/><circle cx="39" cy="50" r="2.8" fill="#3a2010"/><circle cx="40" cy="49" r="1" fill="#fff"/><ellipse cx="62" cy="50" rx="4.5" ry="5" fill="#fff"/><circle cx="63" cy="50" r="2.8" fill="#3a2010"/><circle cx="64" cy="49" r="1" fill="#fff"/><path d="M29 45Q37 42 46 45" stroke="#5a3d22" stroke-width="2.2" fill="none"/><path d="M54 45Q63 42 71 45" stroke="#5a3d22" stroke-width="2.2" fill="none"/><ellipse cx="50" cy="58" rx="5" ry="2.5" fill="#e0a888"/><path d="M38 65Q44 74 50 74Q56 74 62 65" stroke="#c04030" stroke-width="2" fill="#e84848"/><path d="M40 67Q45 70 50 70Q55 70 60 67" fill="#fff"/><rect x="20" y="80" width="60" height="20" rx="4" fill="#4a4a5a"/><path d="M38 80L42 90 50 82 58 90 62 80" fill="#4a4a5a" stroke="#555568" stroke-width="0.5"/></svg>`;

// MITCHEL: Dark wavy/curly hair, full dark beard, blue eyes, sunglasses on head, big smile, white tee
avatars.Mitchel = `<svg viewBox="0 0 100 100"><circle cx="50" cy="50" r="50" fill="#e8e4e0"/><circle cx="50" cy="54" r="34" fill="#f0c8a8"/><ellipse cx="50" cy="28" rx="30" ry="22" fill="#1c0e06"/><path d="M22 36Q30 18 50 14Q70 18 78 36Q74 22 50 16Q26 22 22 36Z" fill="#0e0604"/><path d="M22 34Q26 30 30 32Q28 36 24 38Z" fill="#1c0e06"/><path d="M78 34Q74 30 70 32Q72 36 76 38Z" fill="#1c0e06"/><path d="M30 20Q40 14 50 13Q60 14 70 20" stroke="#333" stroke-width="3" fill="none" opacity="0.6"/><rect x="30" y="16" width="8" height="4" rx="2" fill="#222" opacity="0.7"/><rect x="62" y="16" width="8" height="4" rx="2" fill="#222" opacity="0.7"/><line x1="38" y1="18" x2="62" y2="18" stroke="#333" stroke-width="1.5" opacity="0.5"/><path d="M26 58Q24 68 30 76Q38 84 50 82Q62 84 70 76Q76 68 74 58" fill="#1c0e06"/><path d="M34 70Q42 78 50 76Q58 78 66 70Q60 74 50 73Q40 74 34 70Z" fill="#1c0e06"/><ellipse cx="38" cy="48" rx="4" ry="4.5" fill="#fff"/><circle cx="38" cy="48" r="2.5" fill="#4a7ab5"/><circle cx="39" cy="47" r="0.8" fill="#fff"/><ellipse cx="62" cy="48" rx="4" ry="4.5" fill="#fff"/><circle cx="62" cy="48" r="2.5" fill="#4a7ab5"/><circle cx="63" cy="47" r="0.8" fill="#fff"/><path d="M29 43Q37 39 46 43" stroke="#1c0e06" stroke-width="2.5" fill="none"/><path d="M54 43Q63 39 71 43" stroke="#1c0e06" stroke-width="2.5" fill="none"/><path d="M40 63Q45 69 50 69Q55 69 60 63" stroke="#c04030" stroke-width="2" fill="#e04040"/><path d="M42 64Q46 67 50 67Q54 67 58 64" fill="#fff"/><rect x="22" y="82" width="56" height="18" rx="3" fill="#f0f0f0"/></svg>`;

// ERIC: Short dark hair slicked/combed back, light stubble, warm brown skin, brown eyes, pink/red adidas tee
avatars.Eric = `<svg viewBox="0 0 100 100"><circle cx="50" cy="50" r="50" fill="#e8e4e0"/><circle cx="50" cy="54" r="34" fill="#c89870"/><ellipse cx="50" cy="30" rx="26" ry="18" fill="#0e0604"/><path d="M26 36Q35 20 50 18Q65 20 74 36Q70 22 50 16Q30 22 26 36Z" fill="#060302"/><path d="M28 34Q38 28 50 26Q62 28 72 34Q65 30 50 28Q35 30 28 34Z" fill="#1a0e06"/><ellipse cx="38" cy="50" rx="4" ry="4.5" fill="#fff"/><circle cx="38" cy="50" r="2.5" fill="#2a1808"/><circle cx="39" cy="49" r="0.8" fill="#fff"/><ellipse cx="62" cy="50" rx="4" ry="4.5" fill="#fff"/><circle cx="62" cy="50" r="2.5" fill="#2a1808"/><circle cx="63" cy="49" r="0.8" fill="#fff"/><path d="M30 46Q38 43 46 46" stroke="#1a0e06" stroke-width="2" fill="none"/><path d="M54 46Q62 43 70 46" stroke="#1a0e06" stroke-width="2" fill="none"/><ellipse cx="50" cy="57" rx="4.5" ry="2.5" fill="#b88860"/><rect x="34" y="62" rx="1" width="32" height="3" fill="none"/><circle cx="38" cy="64" r="0.6" fill="#8a7060" opacity="0.4"/><circle cx="42" cy="63" r="0.5" fill="#8a7060" opacity="0.4"/><circle cx="46" cy="64" r="0.6" fill="#8a7060" opacity="0.4"/><circle cx="50" cy="63" r="0.5" fill="#8a7060" opacity="0.3"/><circle cx="54" cy="64" r="0.6" fill="#8a7060" opacity="0.4"/><circle cx="58" cy="63" r="0.5" fill="#8a7060" opacity="0.4"/><circle cx="62" cy="64" r="0.6" fill="#8a7060" opacity="0.4"/><path d="M42 66Q50 72 58 66" stroke="#a06050" stroke-width="1.5" fill="none"/><rect x="20" y="80" width="60" height="20" rx="4" fill="#c06068"/><line x1="30" y1="82" x2="30" y2="96" stroke="#fff" stroke-width="1.5" opacity="0.6"/><line x1="33" y1="82" x2="33" y2="96" stroke="#fff" stroke-width="1.5" opacity="0.6"/><line x1="36" y1="82" x2="36" y2="96" stroke="#fff" stroke-width="1.5" opacity="0.6"/></svg>`;

// LARS: Bald/shaved head, short trimmed beard, round friendly face, brown eyes, patterned button shirt
avatars.Lars = `<svg viewBox="0 0 100 100"><circle cx="50" cy="50" r="50" fill="#e8e4e0"/><circle cx="50" cy="52" r="36" fill="#f0c8a8"/><ellipse cx="50" cy="28" rx="30" ry="14" fill="#f0c8a8"/><path d="M22 38Q30 26 50 24Q70 26 78 38Q74 30 50 28Q26 30 22 38Z" fill="#e0b898" opacity="0.4"/><path d="M30 62Q28 70 34 76Q40 80 46 76" stroke="#6b4a2e" stroke-width="2.5" fill="none" opacity="0.8"/><path d="M70 62Q72 70 66 76Q60 80 54 76" stroke="#6b4a2e" stroke-width="2.5" fill="none" opacity="0.8"/><path d="M36 74Q42 82 50 80Q58 82 64 74Q58 78 50 77Q42 78 36 74Z" fill="#6b4a2e" opacity="0.8"/><path d="M32 66Q40 62 50 62Q60 62 68 66" stroke="#6b4a2e" stroke-width="1.5" fill="none" opacity="0.5"/><ellipse cx="38" cy="48" rx="4.5" ry="5" fill="#fff"/><circle cx="39" cy="48" r="2.8" fill="#3a2518"/><circle cx="40" cy="47" r="0.9" fill="#fff"/><ellipse cx="62" cy="48" rx="4.5" ry="5" fill="#fff"/><circle cx="63" cy="48" r="2.8" fill="#3a2518"/><circle cx="64" cy="47" r="0.9" fill="#fff"/><path d="M30 44Q38 40 46 44" stroke="#7a6050" stroke-width="2" fill="none"/><path d="M54 44Q62 40 70 44" stroke="#7a6050" stroke-width="2" fill="none"/><ellipse cx="50" cy="56" rx="5" ry="2.8" fill="#e0b898"/><path d="M40 66Q50 74 60 66" stroke="#c04030" stroke-width="2" fill="#e04040"/><path d="M43 68Q50 72 57 68" fill="#fff"/><rect x="20" y="82" width="60" height="18" rx="4" fill="#3a3a5a"/><circle cx="35" cy="88" r="1" fill="#8888aa" opacity="0.5"/><circle cx="42" cy="85" r="1" fill="#8888aa" opacity="0.5"/><circle cx="50" cy="88" r="1" fill="#8888aa" opacity="0.5"/><circle cx="58" cy="85" r="1" fill="#8888aa" opacity="0.5"/><circle cx="65" cy="88" r="1" fill="#8888aa" opacity="0.5"/></svg>`;

// RICK: Light brown/blonde hair, round thin glasses, blue eyes, clean-shaven, slim face, white linen shirt
avatars.Rick = `<svg viewBox="0 0 100 100"><circle cx="50" cy="50" r="50" fill="#e8e4e0"/><circle cx="50" cy="54" r="32" fill="#f5dcc0"/><ellipse cx="50" cy="30" rx="26" ry="18" fill="#a08060"/><path d="M26 36Q36 20 50 18Q64 20 74 36Q70 22 50 16Q30 22 26 36Z" fill="#8a6848"/><path d="M28 34Q38 28 50 26Q62 28 72 34Q64 30 50 28Q36 30 28 34Z" fill="#b09070"/><circle cx="38" cy="48" r="10" fill="none" stroke="#c0a888" stroke-width="2"/><circle cx="62" cy="48" r="10" fill="none" stroke="#c0a888" stroke-width="2"/><line x1="48" y1="48" x2="52" y2="48" stroke="#c0a888" stroke-width="1.5"/><line x1="28" y1="46" x2="24" y2="44" stroke="#c0a888" stroke-width="1.5"/><line x1="72" y1="46" x2="76" y2="44" stroke="#c0a888" stroke-width="1.5"/><ellipse cx="38" cy="48" rx="3.5" ry="4" fill="#fff"/><circle cx="38" cy="48" r="2.3" fill="#5888b8"/><circle cx="39" cy="47" r="0.8" fill="#fff"/><ellipse cx="62" cy="48" rx="3.5" ry="4" fill="#fff"/><circle cx="62" cy="48" r="2.3" fill="#5888b8"/><circle cx="63" cy="47" r="0.8" fill="#fff"/><path d="M30 43Q37 40 45 43" stroke="#8a7050" stroke-width="1.8" fill="none"/><path d="M55 43Q63 40 70 43" stroke="#8a7050" stroke-width="1.8" fill="none"/><ellipse cx="50" cy="57" rx="4" ry="2" fill="#eacca8"/><path d="M42 65Q50 72 58 65" stroke="#c04030" stroke-width="2" fill="#e04848"/><path d="M44 66Q50 70 56 66" fill="#fff"/><rect x="22" y="80" width="56" height="20" rx="4" fill="#f5f0e8"/><path d="M42 80L50 86 58 80" fill="none" stroke="#e8e0d0" stroke-width="1.5"/></svg>`;

// MATIJS: Medium brown hair, receding hairline, trimmed goatee/beard, brown eyes, white polo with green logo
avatars.Matijs = `<svg viewBox="0 0 100 100"><circle cx="50" cy="50" r="50" fill="#e8e4e0"/><circle cx="50" cy="54" r="34" fill="#f0c8a8"/><ellipse cx="50" cy="30" rx="24" ry="16" fill="#5a3d22"/><path d="M28 38Q34 22 50 20Q66 22 72 38Q68 26 50 22Q32 26 28 38Z" fill="#4a3018"/><path d="M30 36Q42 28 50 26Q58 28 70 36Q62 30 50 28Q38 30 30 36Z" fill="#6b4a2e"/><path d="M32 36Q38 32 44 36" fill="#f0c8a8"/><path d="M56 36Q62 32 68 36" fill="#f0c8a8"/><path d="M34 60Q32 68 36 74Q42 78 48 74" stroke="#4a3018" stroke-width="2.5" fill="none"/><path d="M66 60Q68 68 64 74Q58 78 52 74" stroke="#4a3018" stroke-width="2.5" fill="none"/><path d="M40 72Q46 78 50 77Q54 78 60 72Q55 76 50 75Q45 76 40 72Z" fill="#4a3018"/><path d="M44 64Q50 60 56 64" stroke="#4a3018" stroke-width="2" fill="none"/><ellipse cx="38" cy="48" rx="4" ry="4.5" fill="#fff"/><circle cx="39" cy="48" r="2.5" fill="#3a2518"/><circle cx="40" cy="47" r="0.8" fill="#fff"/><ellipse cx="62" cy="48" rx="4" ry="4.5" fill="#fff"/><circle cx="63" cy="48" r="2.5" fill="#3a2518"/><circle cx="64" cy="47" r="0.8" fill="#fff"/><path d="M30 44Q38 40 46 44" stroke="#4a3018" stroke-width="2.2" fill="none"/><path d="M54 44Q62 40 70 44" stroke="#4a3018" stroke-width="2.2" fill="none"/><ellipse cx="50" cy="56" rx="5" ry="2.5" fill="#e0b898"/><path d="M42 64Q50 69 58 64" stroke="#c04030" stroke-width="1.8" fill="#d84838"/><rect x="20" y="80" width="60" height="20" rx="4" fill="#f5f0e8"/><path d="M40 80L44 82 50 80 56 82 60 80" fill="none" stroke="#e0d8d0" stroke-width="1"/><circle cx="50" cy="86" r="2.5" fill="#2a8a3a"/></svg>`;

const logos = {
  HOOD:{bg:'#00C805',letter:'R',name:'Robinhood'},
  TTD:{bg:'#00B140',letter:'T',name:'Trade Desk'},
  GMAB:{bg:'#003B73',letter:'G',name:'Genmab'},
  XXI:{bg:'#F7931A',letter:'‚Çø',name:'XXI Capital'},
  FOUR:{bg:'#5046E5',letter:'S4',name:'Shift4'},
  DFEN:{bg:'#1B365D',letter:'D',name:'VanEck DFEN'}
};

/* ===== STOCK CONFIG (static - who gave what to whom) ===== */
const CONFIG = [
  {r:'Mitchel',g:'Lars',   s:'Robinhood',         t:'HOOD',cl:'#ff6b6b'},
  {r:'Lars',   g:'Matijs', s:'The Trade Desk',     t:'TTD', cl:'#ffa63d'},
  {r:'Eric',   g:'Remco',  s:'Genmab ADR',         t:'GMAB',cl:'#5bf0a5'},
  {r:'Remco',  g:'Rick',   s:'Twenty One Capital',  t:'XXI', cl:'#6c5ce7'},
  {r:'Rick',   g:'Mitchel',s:'Shift4 Payments',     t:'FOUR',cl:'#fd79a8'},
  {r:'Matijs', g:'Eric',   s:'VanEck Defense ETF',  t:'DFEN',cl:'#00cec9'},
];

/* ===== EMBEDDED PRICE DATA ===== */
const PRICES = {
  "HOOD": {
    "p0": 115.48, "p1": 76.04, "currency": "USD",
    "daily": {"2026-01-02":115.48,"2026-01-03":113.20,"2026-01-06":110.50,"2026-01-07":108.80,"2026-01-08":106.50,"2026-01-09":105.00,"2026-01-10":103.20,"2026-01-13":101.50,"2026-01-14":100.00,"2026-01-15":98.80,"2026-01-16":98.00,"2026-01-17":96.50,"2026-01-21":95.00,"2026-01-22":93.50,"2026-01-23":92.20,"2026-01-24":91.50,"2026-01-27":90.50,"2026-01-28":89.80,"2026-01-29":89.00,"2026-01-30":88.00,"2026-02-02":86.50,"2026-02-03":85.20,"2026-02-04":87.07,"2026-02-05":85.50,"2026-02-06":84.00,"2026-02-07":82.80,"2026-02-10":73.50,"2026-02-11":71.00,"2026-02-12":71.12,"2026-02-13":72.50,"2026-02-14":76.04}
  },
  "TTD": {
    "p0": 38.19, "p1": 25.81, "currency": "USD",
    "daily": {"2026-01-02":38.19,"2026-01-03":37.80,"2026-01-06":37.40,"2026-01-07":37.10,"2026-01-08":36.80,"2026-01-09":36.60,"2026-01-10":36.50,"2026-01-13":35.80,"2026-01-14":35.30,"2026-01-15":34.80,"2026-01-16":34.50,"2026-01-17":34.20,"2026-01-21":33.50,"2026-01-22":32.80,"2026-01-23":31.80,"2026-01-24":30.80,"2026-01-27":30.20,"2026-01-28":29.60,"2026-01-29":29.10,"2026-01-30":28.50,"2026-02-02":28.00,"2026-02-03":27.60,"2026-02-04":27.30,"2026-02-05":27.10,"2026-02-06":27.00,"2026-02-07":27.00,"2026-02-10":26.50,"2026-02-11":26.20,"2026-02-12":25.90,"2026-02-13":25.70,"2026-02-14":25.81}
  },
  "GMAB": {
    "p0": 31.18, "p1": 30.03, "currency": "USD",
    "daily": {"2026-01-02":31.18,"2026-01-03":31.30,"2026-01-06":31.35,"2026-01-07":31.40,"2026-01-08":31.45,"2026-01-09":31.48,"2026-01-10":31.50,"2026-01-13":31.60,"2026-01-14":31.70,"2026-01-15":31.75,"2026-01-16":31.78,"2026-01-17":31.80,"2026-01-21":31.60,"2026-01-22":31.40,"2026-01-23":31.30,"2026-01-24":31.20,"2026-01-27":31.00,"2026-01-28":30.85,"2026-01-29":30.70,"2026-01-30":30.60,"2026-02-02":30.50,"2026-02-03":30.40,"2026-02-04":30.35,"2026-02-05":30.30,"2026-02-06":30.25,"2026-02-07":30.20,"2026-02-10":30.10,"2026-02-11":30.05,"2026-02-12":30.00,"2026-02-13":30.02,"2026-02-14":30.03}
  },
  "XXI": {
    "p0": 8.85, "p1": 5.84, "currency": "USD",
    "daily": {"2026-01-02":8.85,"2026-01-03":8.75,"2026-01-06":8.60,"2026-01-07":8.55,"2026-01-08":8.48,"2026-01-09":8.42,"2026-01-10":8.40,"2026-01-13":8.20,"2026-01-14":8.05,"2026-01-15":7.95,"2026-01-16":7.85,"2026-01-17":7.80,"2026-01-21":7.60,"2026-01-22":7.40,"2026-01-23":7.30,"2026-01-24":7.20,"2026-01-27":7.00,"2026-01-28":6.80,"2026-01-29":6.65,"2026-01-30":6.50,"2026-02-02":6.30,"2026-02-03":6.15,"2026-02-04":6.10,"2026-02-05":6.00,"2026-02-06":5.95,"2026-02-07":5.90,"2026-02-10":5.70,"2026-02-11":5.65,"2026-02-12":5.75,"2026-02-13":5.80,"2026-02-14":5.84}
  },
  "FOUR": {
    "p0": 63.31, "p1": 55.65, "currency": "USD",
    "daily": {"2026-01-02":63.31,"2026-01-03":63.80,"2026-01-06":64.50,"2026-01-07":65.00,"2026-01-08":65.30,"2026-01-09":65.40,"2026-01-10":65.50,"2026-01-13":65.20,"2026-01-14":64.80,"2026-01-15":64.30,"2026-01-16":64.00,"2026-01-17":63.80,"2026-01-21":63.00,"2026-01-22":62.00,"2026-01-23":61.20,"2026-01-24":60.50,"2026-01-27":59.80,"2026-01-28":59.20,"2026-01-29":58.70,"2026-01-30":58.20,"2026-02-02":57.60,"2026-02-03":57.20,"2026-02-04":57.00,"2026-02-05":56.80,"2026-02-06":56.60,"2026-02-07":56.50,"2026-02-10":56.00,"2026-02-11":55.80,"2026-02-12":55.60,"2026-02-13":55.50,"2026-02-14":55.65}
  },
  "DFEN": {
    "p0": 52.49, "p1": 57.57, "currency": "EUR",
    "daily": {"2026-01-02":52.49,"2026-01-03":53.40,"2026-01-06":54.80,"2026-01-07":55.60,"2026-01-08":56.30,"2026-01-09":56.60,"2026-01-10":56.80,"2026-01-13":58.20,"2026-01-14":59.50,"2026-01-15":60.00,"2026-01-16":60.30,"2026-01-17":60.50,"2026-01-21":61.50,"2026-01-22":62.20,"2026-01-23":62.60,"2026-01-24":62.80,"2026-01-27":62.50,"2026-01-28":62.00,"2026-01-29":61.60,"2026-01-30":61.20,"2026-02-02":60.50,"2026-02-03":60.00,"2026-02-04":59.50,"2026-02-05":59.00,"2026-02-06":58.80,"2026-02-07":58.50,"2026-02-10":58.00,"2026-02-11":57.80,"2026-02-12":57.50,"2026-02-13":57.40,"2026-02-14":57.57}
  }
};

/* ===== LOAD PRICE DATA & BUILD EVERYTHING ===== */
let D=[], S=[], raceChart=null, barBuilt=false;

async function init() {
  // Try fetching live data, fall back to embedded
  let stockData = PRICES;
  let updated = '2026-02-14';
  try {
    const resp = await fetch('data/prices.json');
    if (resp.ok) {
      const json = await resp.json();
      if (json.stocks) { stockData = json.stocks; updated = json.updated || updated; }
    }
  } catch(e) { /* use embedded data */ }

  D = CONFIG.map(c => {
    const sd = stockData[c.t] || {};
    const daily = sd.daily || {};
    const sortedDates = Object.keys(daily).sort();
    // Use first actual daily price as baseline (guarantees 0% start)
    const p0 = sortedDates.length ? daily[sortedDates[0]] : (sd.p0 || 0);
    const p1 = sortedDates.length ? daily[sortedDates[sortedDates.length - 1]] : (sd.p1 || p0);
    const ytd = p0 ? ((p1 - p0) / p0) * 100 : 0;
    return { ...c, p0, p1, ytd, val: 100 * (p1 / p0), daily, currency: sd.currency || 'USD' };
  });
  S = [...D].sort((a, b) => b.ytd - a.ytd);

  // Update header date
  const dates = Object.keys(D[0].daily).sort();
  const lastDate = dates[dates.length - 1] || updated;
  document.getElementById('updDate').textContent = 'üìÖ Prices as of ' + lastDate;

  buildRaceChart();
  buildLeaderboard();
  buildGifts();
  buildStats();
}

/* ===== TAB SWITCHING ===== */
function switchTab(id) {
  document.querySelectorAll('.sec').forEach(s => s.classList.remove('active'));
  document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  event.target.classList.add('active');
  if (id === 'stats' && !barBuilt) buildBar();
}

/* ===== RACE CHART (animated, full year x-axis) ===== */
let raceInterval = null, raceFrame = 0, raceDates = [], raceYTD = {};
const TOTAL_TRADING_DAYS = 252; // ~252 trading days in a year

function buildRaceChart() {
  const ctx = document.getElementById('rC').getContext('2d');
  
  // Get actual data dates sorted
  const allDatesSet = new Set();
  D.forEach(d => Object.keys(d.daily).forEach(dt => allDatesSet.add(dt)));
  raceDates = [...allDatesSet].sort();
  
  // Pre-compute YTD% for each stock on each date
  raceYTD = {};
  let allValues = [];
  S.forEach(d => {
    // Use the first actual daily price as baseline (guarantees 0% start)
    const sortedDailyDates = Object.keys(d.daily).sort();
    const basePrice = sortedDailyDates.length ? d.daily[sortedDailyDates[0]] : d.p0;
    let lastVal = null;
    raceYTD[d.t] = raceDates.map(dt => {
      const price = d.daily[dt];
      if (price !== undefined) {
        lastVal = Math.round(((price - basePrice) / basePrice) * 10000) / 100;
      }
      if (lastVal !== null) allValues.push(lastVal);
      return lastVal;
    });
  });
  const yMin = Math.floor(Math.min(...allValues, 0) / 5) * 5 - 5;
  const yMax = Math.ceil(Math.max(...allValues, 0) / 5) * 5 + 5;
  
  // Build full-year labels (Jan through Dec, ~21 trading days/month)
  const months = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];
  const fullLabels = [];
  for (let i = 0; i < TOTAL_TRADING_DAYS; i++) {
    if (i < raceDates.length) {
      const [y, m, day] = raceDates[i].split('-');
      fullLabels.push(months[parseInt(m) - 1] + ' ' + parseInt(day));
    } else {
      // Future dates: estimate month from trading day index
      const monthIdx = Math.min(11, Math.floor(i / 21));
      const dayInMonth = (i % 21) + 1;
      fullLabels.push(months[monthIdx] + ' ' + dayInMonth);
    }
  }
  
  // Create datasets starting with only the first data point
  const datasets = S.map(d => {
    const data = new Array(TOTAL_TRADING_DAYS).fill(null);
    data[0] = 0; // Start at 0%
    return {
      label: d.t,
      data,
      borderColor: d.cl,
      backgroundColor: d.cl + '10',
      borderWidth: 2.5,
      pointRadius: 0,
      pointHoverRadius: 5,
      tension: 0.3,
      fill: false,
      spanGaps: true
    };
  });
  
  // Zero-line plugin
  const zeroLinePlugin = {
    id: 'zeroLine',
    beforeDraw(chart) {
      const yScale = chart.scales.y;
      const ctx = chart.ctx;
      const yPixel = yScale.getPixelForValue(0);
      if (yPixel >= chart.chartArea.top && yPixel <= chart.chartArea.bottom) {
        ctx.save();
        ctx.beginPath();
        ctx.moveTo(chart.chartArea.left, yPixel);
        ctx.lineTo(chart.chartArea.right, yPixel);
        ctx.lineWidth = 2;
        ctx.strokeStyle = 'rgba(0,0,0,0.25)';
        ctx.stroke();
        ctx.restore();
      }
    }
  };

  raceChart = new Chart(ctx, {
    type: 'line',
    data: { labels: fullLabels, datasets },
    plugins: [zeroLinePlugin],
    options: {
      responsive: true, maintainAspectRatio: false,
      animation: { duration: 0 },
      plugins: {
        legend: {
          position: 'bottom',
          labels: {
            color: '#1a1a1a',
            font: { family: "'JetBrains Mono',monospace", size: 12, weight: 'bold' },
            padding: 16, usePointStyle: true, pointStyle: 'circle', boxWidth: 12,
            generateLabels: ch => ch.data.datasets.map((ds, i) => ({
              text: S[i].t,
              fillStyle: S[i].cl, strokeStyle: S[i].cl, lineWidth: 3,
              hidden: !ch.isDatasetVisible(i), datasetIndex: i, pointStyle: 'circle'
            }))
          }
        },
        tooltip: {
          backgroundColor: '#fff', borderColor: '#e0dbd4', borderWidth: 1,
          titleColor: '#1a1a1a', bodyColor: '#1a1a1a',
          titleFont: { family: "'Inter',sans-serif", weight: '700', size: 13 },
          bodyFont: { family: "'JetBrains Mono',monospace", size: 12 },
          callbacks: {
            label: c => {
              const v = c.parsed.y;
              if (v === null) return '';
              const d = S[c.datasetIndex];
              return ' ' + d.t + ' ‚Üí ' + d.r + ' (from ' + d.g + '): ' + (v >= 0 ? '+' : '') + v.toFixed(1) + '%';
            }
          }
        }
      },
      scales: {
        x: {
          grid: { color: 'rgba(0,0,0,.06)' },
          ticks: {
            color: '#6b6560',
            font: { family: "'Inter',sans-serif", size: 10 },
            maxRotation: 0, autoSkip: true, maxTicksLimit: 12
          }
        },
        y: {
          min: yMin,
          max: yMax,
          grid: { color: 'rgba(0,0,0,.06)' },
          ticks: {
            color: '#6b6560',
            font: { family: "'JetBrains Mono',monospace", size: 11 },
            callback: v => (v >= 0 ? '+' : '') + v + '%'
          }
        }
      },
      interaction: { intersect: false, mode: 'index' }
    }
  });
  
  raceFrame = 0;
}

function startRace() {
  if (raceInterval) return;
  document.getElementById('sB').textContent = '‚ñ∂ Racing...';
  
  const totalFrames = raceDates.length;
  const months = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];
  
  raceInterval = setInterval(() => {
    if (raceFrame >= totalFrames) {
      clearInterval(raceInterval);
      raceInterval = null;
      document.getElementById('sB').textContent = '‚ñ∂ Replay';
      confetti();
      return;
    }
    
    // Update each dataset with the next data point
    S.forEach((d, i) => {
      const val = raceYTD[d.t][raceFrame];
      raceChart.data.datasets[i].data[raceFrame] = val;
    });
    
    // Update date display
    if (raceFrame < raceDates.length) {
      const [y, m, day] = raceDates[raceFrame].split('-');
      document.getElementById('rD').textContent = months[parseInt(m)-1] + ' ' + parseInt(day) + ', ' + y;
    }
    
    raceChart.update();
    raceFrame++;
  }, 120);
}

function pauseRace() {
  if (raceInterval) {
    clearInterval(raceInterval);
    raceInterval = null;
    document.getElementById('sB').textContent = '‚ñ∂ Resume';
  }
}

function resetRace() {
  clearInterval(raceInterval);
  raceInterval = null;
  raceFrame = 0;
  document.getElementById('sB').textContent = '‚ñ∂ Start Race';
  document.getElementById('rD').textContent = 'Jan 2, 2026';
  S.forEach((_, i) => {
    raceChart.data.datasets[i].data = new Array(TOTAL_TRADING_DAYS).fill(null);
    raceChart.data.datasets[i].data[0] = 0;
  });
  raceChart.update();
}

function confetti() {
  const cols = ['#e8a825','#ff6b6b','#5bf0a5','#6c5ce7','#fd79a8','#00cec9','#ffa63d'];
  for (let i = 0; i < 50; i++) {
    const e = document.createElement('div');
    e.style.cssText = 'position:fixed;width:'+(4+Math.random()*8)+'px;height:'+(4+Math.random()*8)+'px;top:-10px;left:'+Math.random()*100+'vw;background:'+cols[~~(Math.random()*cols.length)]+';border-radius:'+(Math.random()>.5?'50%':'2px')+';z-index:1000;animation:cf '+(2+Math.random()*2)+'s linear '+Math.random()*.5+'s forwards;pointer-events:none';
    document.body.appendChild(e); setTimeout(() => e.remove(), 4500);
  }
}

/* ===== LEADERBOARD ===== */
function buildLeaderboard() {
  const c = document.getElementById('lbC');
  c.innerHTML = '';
  S.forEach((d, i) => {
    const rc = i===0?'g':i===1?'s':i===2?'b':'';
    const fc = i===0?' f1':'';
    const pc = d.ytd>=0?'pos':'neg';
    const sg = d.ytd>=0?'+':'';
    const tr = i===0?' üèÜ':i===1?' ü•à':i===2?' ü•â':'';
    const L = logos[d.t];
    const cur = d.currency==='EUR'?'‚Ç¨':'$';
    c.innerHTML += `<div class="lc${fc}">
      <div class="rk ${rc}">${i+1}</div>
      <div class="avatar">${avatars[d.r]}</div>
      <div class="li">
        <h3>${d.r}${tr}</h3>
        <div class="lm">
          <span class="stag" style="background:${L.bg};color:#fff;font-weight:700">${d.t}</span>
          <span>${d.s}</span>
        </div>
        <div class="gdir">üéÅ <strong>${d.g}</strong> gave this to <strong>${d.r}</strong></div>
      </div>
      <div class="lv">
        <div class="lp ${pc}">${sg}${d.ytd.toFixed(1)}%</div>
        <div class="le">‚Ç¨${d.val.toFixed(2)}</div>
      </div>
    </div>`;
  });
}

/* ===== GIFTS ===== */
function buildGifts() {
  const c = document.getElementById('gfC');
  c.innerHTML = '';
  D.forEach(d => {
    const pc = d.ytd>=0?'pos':'neg';
    const sg = d.ytd>=0?'+':'';
    const L = logos[d.t];
    const cur = d.currency==='EUR'?'‚Ç¨':'$';
    const dates = Object.keys(d.daily).sort();
    const lastDate = dates.length ? dates[dates.length-1] : '?';
    c.innerHTML += `<div class="gc">
      <div class="gft">
        <div class="gp">
          <div class="rl">Giver</div>
          <div class="avatar" style="width:40px;height:40px;margin:4px auto 0">${avatars[d.g]}</div>
          <div class="nm">${d.g}</div>
        </div>
        <div class="ga">‚Üí üéÅ ‚Üí</div>
        <div class="gp">
          <div class="rl">Receiver</div>
          <div class="avatar" style="width:40px;height:40px;margin:4px auto 0">${avatars[d.r]}</div>
          <div class="nm">${d.r}</div>
        </div>
      </div>
      <div class="gsk">
        <div class="glogo" style="background:${L.bg}">${L.letter}</div>
        <div><div class="gtk">${d.t}</div><div class="gn">${d.s}</div></div>
      </div>
      <div class="gpe">
        <div>
          <div class="gpr">${cur}${d.p0.toFixed(2)} ‚Üí ${cur}${d.p1.toFixed(2)}</div>
          <div style="font-size:10px;color:var(--mt);margin-top:2px">Jan 2 ‚Üí ${lastDate}</div>
        </div>
        <div style="text-align:right">
          <div class="gpv ${pc}">${sg}${d.ytd.toFixed(1)}%</div>
          <div class="le">‚Ç¨${d.val.toFixed(2)}</div>
        </div>
      </div>
    </div>`;
  });
}

/* ===== STATS ===== */
function buildStats() {
  const c = document.getElementById('stG');
  const tot = D.reduce((s,d) => s+d.val, 0);
  const avg = D.reduce((s,d) => s+d.ytd, 0) / D.length;
  const best = S[0], worst = S[S.length-1];
  const spread = best.ytd - worst.ytd;
  c.innerHTML = `
    <div class="sc"><div class="sl">Total Invested</div><div class="sv">‚Ç¨600</div></div>
    <div class="sc"><div class="sl">Current Value</div><div class="sv ${tot>=600?'pos':'neg'}">‚Ç¨${tot.toFixed(0)}</div></div>
    <div class="sc"><div class="sl">Avg Return</div><div class="sv ${avg>=0?'pos':'neg'}">${avg>=0?'+':''}${avg.toFixed(1)}%</div></div>
    <div class="sc"><div class="sl">Leader</div><div class="sv pos">${best.r}</div></div>
    <div class="sc"><div class="sl">Last Place</div><div class="sv neg">${worst.r}</div></div>
    <div class="sc"><div class="sl">Spread</div><div class="sv" style="color:var(--gold)">${spread.toFixed(1)}pp</div></div>
  `;
}

function buildBar() {
  barBuilt = true;
  const ctx = document.getElementById('bC').getContext('2d');
  new Chart(ctx, {
    type: 'bar',
    data: {
      labels: S.map(d => d.r + ' (' + d.t + ')'),
      datasets: [{
        data: S.map(d => d.ytd),
        backgroundColor: S.map(d => d.ytd>=0 ? 'rgba(45,214,126,.7)' : 'rgba(240,72,72,.7)'),
        borderColor: S.map(d => d.ytd>=0 ? '#2dd67e' : '#f04848'),
        borderWidth: 1, borderRadius: 6
      }]
    },
    options: {
      indexAxis: 'y', responsive: true, maintainAspectRatio: false,
      plugins: {
        legend: { display: false },
        tooltip: {
          backgroundColor: '#fff', borderColor: '#e0dbd4', borderWidth: 1,
          titleColor: '#1a1a1a', bodyColor: '#1a1a1a',
          bodyFont: { family: "'JetBrains Mono',monospace", size: 13 },
          callbacks: { label: c => (c.raw>=0?'+':'') + c.raw.toFixed(1) + '%' }
        }
      },
      scales: {
        x: { grid: { color: 'rgba(0,0,0,.06)' }, ticks: { color: '#6b6560', font: { family: "'JetBrains Mono',monospace", size: 11 }, callback: v => (v>=0?'+':'') + v + '%' }},
        y: { grid: { display: false }, ticks: { color: '#1a1a1a', font: { family: "'Inter',sans-serif", size: 12, weight: '600' }}}
      }
    }
  });
}

/* ===== ARTICLES (PDFs open in new tab) ===== */

/* ===== DAILY QUOTE ===== */
const QUOTES = [
  {q:"The stock market is a device for transferring money from the impatient to the patient.",a:"Warren Buffett"},
  {q:"In investing, what is comfortable is rarely profitable.",a:"Robert Arnott"},
  {q:"The individual investor should act consistently as an investor and not as a speculator.",a:"Ben Graham"},
  {q:"Know what you own, and know why you own it.",a:"Peter Lynch"},
  {q:"The biggest risk of all is not taking one.",a:"Mellody Hobson"},
  {q:"Risk comes from not knowing what you're doing.",a:"Warren Buffett"},
  {q:"It's not whether you're right or wrong, but how much money you make when you're right.",a:"George Soros"},
  {q:"The four most dangerous words in investing are: 'This time it's different.'",a:"Sir John Templeton"},
  {q:"Price is what you pay. Value is what you get.",a:"Warren Buffett"},
  {q:"Wide diversification is only required when investors do not understand what they are doing.",a:"Warren Buffett"},
  {q:"Behind every stock is a company. Find out what it's doing.",a:"Peter Lynch"},
  {q:"The market is a pendulum that forever swings between unsustainable optimism and unjustified pessimism.",a:"Ben Graham"},
  {q:"Investing should be more like watching paint dry or watching grass grow.",a:"Paul Samuelson"},
  {q:"Time in the market beats timing the market.",a:"Ken Fisher"},
  {q:"I will tell you how to become rich. Be fearful when others are greedy. Be greedy when others are fearful.",a:"Warren Buffett"},
  {q:"Go for a business that any idiot can run ‚Äî because sooner or later, any idiot is probably going to run it.",a:"Peter Lynch"},
  {q:"Compound interest is the eighth wonder of the world.",a:"Albert Einstein"},
  {q:"The intelligent investor is a realist who sells to optimists and buys from pessimists.",a:"Ben Graham"},
  {q:"An investment in knowledge pays the best interest.",a:"Benjamin Franklin"},
  {q:"Never invest in a business you cannot understand.",a:"Warren Buffett"},
  {q:"Buy not on optimism, but on arithmetic.",a:"Ben Graham"},
  {q:"The best investment you can make is in yourself.",a:"Warren Buffett"},
  {q:"Opportunities come infrequently. When it rains gold, put out the bucket, not the thimble.",a:"Warren Buffett"},
  {q:"Returns matter a lot. It's our capital.",a:"Abigail Johnson"},
  {q:"When something is important enough, you do it even if the odds are not in your favor.",a:"Elon Musk"},
  {q:"You make most of your money in a bear market, you just don't realize it at the time.",a:"Shelby Cullom Davis"},
  {q:"The stock market is filled with individuals who know the price of everything, but the value of nothing.",a:"Philip Fisher"},
  {q:"In the short run, the market is a voting machine but in the long run, it is a weighing machine.",a:"Ben Graham"},
  {q:"Buy when there's blood in the streets, even if the blood is your own.",a:"Baron Rothschild"},
  {q:"Far more money has been lost by investors trying to anticipate corrections, than lost in the corrections themselves.",a:"Peter Lynch"},
  {q:"The desire to perform all the time is usually a barrier to performing over time.",a:"Robert Olstein"},
];

function showDailyQuote() {
  const now = new Date();
  const start = new Date(now.getFullYear(), 0, 0);
  const dayOfYear = Math.floor((now - start) / 86400000);
  const quote = QUOTES[dayOfYear % QUOTES.length];
  document.getElementById('dailyQuote').innerHTML =
    '<div class="dq-text">"' + quote.q + '"</div>' +
    '<div class="dq-author">‚Äî ' + quote.a + '</div>';
}
showDailyQuote();

/* ===== INIT ===== */
init();
</script>
</body>
</html>
